# 数组

## 概念

数组（Array）是一种**线性表数据结构**。它用一组**连续的内存空间**，来存储一组具有**相同类型**的数据。

### 线性表

- 线性表

顾名思义，线性表就是数据排成像一条线一样的结构。每个线性表上的数据最多只有前和后两个方向。其实除了数组，链表、队列、栈等也是线性表结构。

![](image/image.png)

- 非线性表

比如二叉树、堆、图等。之所以叫非线性，是因为，在非线性表中，数据之间并不是简单的前后关系。

![](image/image_1.png)

### 连续的内存空间、相同类型的数据

- 计算机会给每个内存单元分配一个地址，计算机通过地址来访问内存中的数据；

- 当计算机需要随机访问数组中的某个元素时，它会首先通过下面的寻址公式，计算出该元素存储的内存地址：

   ```bash
   a[i]_address = base_address + i * data_type_size 
   ```


i为偏移量（`offset`），访问第一个元素时，偏移量为0。这也是为什么从0开始数的原因（之一）；

  - 数组支持随机访问，根据下标随机访问的时间复杂度为 O(1)；而数组查询的时间复杂度不是$O(1)$,即使排序好的数组使用二分法，查询的时间复杂度也是$O(logN)$

## 经验

1. Java `ArrayList` 无法存储基本类型，比如 `int`、`long`，需要封装为 `Integer`、`Long` 类，而 `Autoboxing`、`Unboxing` 则有一定的性能消耗，所以如果特别关注性能，或者希望使用基本类型，就可以选用数组。

2. 如果数据大小事先已知，并且对数据的操作非常简单，用不到 `ArrayList` 提供的大部分方法，也可以直接使用数组。

3. 当要表示多维数组时，用数组往往会更加直观。比如 `Object[][] array`；而用容器的话则需要这样定义：`ArrayList<ArrayList<object> > array`；

4. 我总结一下，**对于业务开发，直接使用容器就足够了，省时省力。毕竟损耗一丢丢性能，完全不会影响到系统整体的性能**。但如果你是做一些非常底层的开发，比如开发网络框架，性能的优化需要做到极致，这个时候数组就会优于容器，成为首选。

5. **还是最好使用容器类；**

